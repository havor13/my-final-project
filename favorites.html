<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Favorites | Local Event Explorer</title>
  <meta name="description" content="View and manage your saved favorite events in Local Event Explorer.">
  <link rel="stylesheet" href="styles/styles.css">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link href="https://fonts.googleapis.com/css2?family=Roboto&family=Oswald&family=Merriweather&display=swap" rel="stylesheet"> 
  <link rel="preconnect" href="https://fonts.googleapis.com"> 
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
  <!-- Banner Header -->
  <header class="site-header">
    <div class="banner">
      <h1>‚≠ê My Favorite Events</h1>
      <p class="author">Created by Sampson Havor</p>
    </div>
    <nav aria-label="Main navigation">
      <a href="index.html">Home</a> | 
      <a href="favorites.html" class="active">Favorites</a> | 
      <a href="events.html">Events</a>
    </nav>
  </header>

  <main>
    <!-- Hero Section -->
    <section class="hero">
      <h2>Your Saved Events</h2>
      <p>Here are the events you‚Äôve marked as favorites. Click to view details or remove them individually. You can also clear all at once.</p>
      <button id="clearAllBtn" class="clear-btn">üóë Clear All Favorites</button>
    </section>

    <!-- Favorites Grid -->
    <section id="favoritesList" class="grid" aria-live="polite"></section>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <p>¬© 2026 Local Event Explorer | Author: Sampson Havor</p>
  </footer>

  <!-- Script -->
  <script type="module">
    function loadFavorites() {
      const favorites = JSON.parse(localStorage.getItem("favorites")) || [];
      const list = document.getElementById("favoritesList");
      list.innerHTML = "";

      if (favorites.length === 0) {
        list.innerHTML = `
          <div class="empty-state fade-in">
            <p>No favorites saved yet. Start exploring events!</p>
            <a href="index.html" class="btn">Find Events</a>
          </div>
        `;
      } else {
        favorites.forEach(fav => {
          const card = document.createElement("div");
          card.className = "event-card fade-in";
          card.innerHTML = `
            <img src="${fav.image || 'placeholder.jpg'}" alt="Banner for ${fav.name}">
            <h3>${fav.name}</h3>
            <p><strong>Date:</strong> ${fav.date || "TBA"} ${fav.time ? '@ ' + fav.time : ''}</p>
            <p><strong>Venue:</strong> ${fav.venue || ""}, ${fav.city || ""}</p>
            <span class="category ${fav.category?.toLowerCase() || ""}">${fav.category || ""}</span>
            <p class="description">${fav.description || ""}</p>
            <p class="price"><strong>Price:</strong> ${fav.price || "TBA"}</p>
            <div class="card-actions">
              <a href="events.html?id=${fav.id}" class="details-link">View Details</a>
              <button class="remove-btn" data-id="${fav.id}">Remove</button>
              ${fav.url ? `<a href="${fav.url}" target="_blank" class="btn">Official Page</a>` : ""}
            </div>
          `;
          list.appendChild(card);
        });

        // Attach remove event listeners
        document.querySelectorAll(".remove-btn").forEach(btn => {
          btn.addEventListener("click", () => removeFavorite(btn.dataset.id));
        });
      }
    }

    function removeFavorite(id) {
      let favorites = JSON.parse(localStorage.getItem("favorites")) || [];
      favorites = favorites.filter(fav => fav.id !== id);
      localStorage.setItem("favorites", JSON.stringify(favorites));
      loadFavorites();
    }

    function clearAllFavorites() {
      if (confirm("Are you sure you want to clear all favorites?")) {
        localStorage.removeItem("favorites");
        loadFavorites();
        alert("All favorites have been cleared!");
      }
    }

    document.getElementById("clearAllBtn").addEventListener("click", clearAllFavorites);

    loadFavorites();
  </script>
</body>
</html>